-- Function to spawn visual pet (improved)
local function spawnPet(petName)
    -- Remove old pet if exists
    if workspace:FindFirstChild("VisualPet") then
        workspace.VisualPet:Destroy()
    end

    -- Create pet model (simple MeshPart placeholder)
    local pet = Instance.new("Part")
    pet.Name = "VisualPet"
    pet.Size = Vector3.new(3,3,3)
    pet.Shape = Enum.PartType.Ball
    pet.Anchored = false
    pet.CanCollide = false
    pet.Material = Enum.Material.Neon
    pet.BrickColor = BrickColor.Random()
    pet.Parent = workspace

    -- Smooth follow using BodyPosition & BodyGyro
    local bodyPos = Instance.new("BodyPosition")
    bodyPos.MaxForce = Vector3.new(1e5,1e5,1e5)
    bodyPos.P = 3000
    bodyPos.D = 10
    bodyPos.Position = player.Character.HumanoidRootPart.Position + Vector3.new(3,0,0)
    bodyPos.Parent = pet

    local bodyGyro = Instance.new("BodyGyro")
    bodyGyro.MaxTorque = Vector3.new(1e5,1e5,1e5)
    bodyGyro.P = 3000
    bodyGyro.CFrame = CFrame.new()
    bodyGyro.Parent = pet

    -- Update loop
    local runService = game:GetService("RunService")
    local conn
    conn = runService.RenderStepped:Connect(function()
        if not pet or not pet.Parent then conn:Disconnect() return end
        local targetPos = player.Character.HumanoidRootPart.Position + Vector3.new(3,0,0)
        bodyPos.Position = targetPos
        bodyGyro.CFrame = CFrame.new(pet.Position, player.Character.HumanoidRootPart.Position)
    end)

    -- Billboard for pet name
    local billboard = Instance.new("BillboardGui")
    billboard.Size = UDim2
